# ğŸš€ ä¼˜åŒ–ç‰ˆå®éªŒç³»ç»Ÿä½¿ç”¨æŒ‡å—

## ç³»ç»Ÿç‰¹æ€§

âœ… **æ ¸å¿ƒä¼˜åŒ–**
- æ‰¹é‡LLMè°ƒç”¨ï¼ˆ10ä¸ªä¸€æ‰¹ï¼‰
- å‘é‡ç´¢å¼•æŒä¹…åŒ–ï¼ˆHNSWç´¢å¼•ï¼‰
- å¤šæ™ºèƒ½ä½“æ¡†æ¶å•ä¾‹åŒ–ï¼ˆåˆå§‹åŒ–ä¸€æ¬¡ï¼‰
- æŸ¥è¯¢å»é‡è‡ªåŠ¨å¤„ç†

## å¿«é€Ÿå¼€å§‹

### 1. å¿«é€Ÿæµ‹è¯•ï¼ˆ5ä¸ªæŸ¥è¯¢ï¼Œæ— LLMï¼‰
```bash
python run_experiments.py quick --task join --dataset subset
```

### 2. æ¶ˆèå®éªŒï¼ˆå®Œæ•´ä¸‰å±‚å¯¹æ¯”ï¼‰
```bash
python run_experiments.py ablation --task join --dataset subset --max-queries 20
```

### 3. å®Œæ•´å®éªŒï¼ˆä½¿ç”¨æœ€ä½³é…ç½®ï¼‰
```bash
python run_experiments.py full --task join --dataset subset --max-queries 20 --use-best-config
```

### 4. æ¶ˆèå®éªŒï¼ˆä¼˜åŒ–ç‰ˆï¼‰
```bash
python run_optimized_ablation.py --task join --dataset subset --max-queries 20
```

## å®éªŒç±»å‹è¯´æ˜

| å®éªŒç±»å‹ | ç”¨é€” | è¿è¡Œæ—¶é—´ | LLMè°ƒç”¨ |
|---------|------|----------|---------|
| `quick` | å¿«é€ŸéªŒè¯ç³»ç»Ÿ | 1-2åˆ†é’Ÿ | å¦ |
| `ablation` | ä¸‰å±‚æ€§èƒ½å¯¹æ¯” | 10-15åˆ†é’Ÿ | æ˜¯ï¼ˆL3å±‚ï¼‰ |
| `full` | å®Œæ•´ç³»ç»Ÿæµ‹è¯• | 15-20åˆ†é’Ÿ | æ˜¯ |

## ä¸»è¦è„šæœ¬

### æ ¸å¿ƒè„šæœ¬ï¼ˆä¿ç•™ï¼‰
- `run_experiments.py` - ç»Ÿä¸€å®éªŒå…¥å£
- `run_optimized_ablation.py` - ä¼˜åŒ–ç‰ˆæ¶ˆèå®éªŒ
- `enhanced_ablation_experiment.py` - åŸå§‹æ¶ˆèå®éªŒ
- `run_langgraph_system.py` - ä¸»ç³»ç»Ÿè¿è¡Œ

### é…ç½®æ–‡ä»¶
- `config_multi_agent_best.yml` - æœ€ä½³å‚æ•°é…ç½®
- `config.yml` - å½“å‰ç³»ç»Ÿé…ç½®

## å‘é‡ç´¢å¼•æŒä¹…åŒ–

ç³»ç»Ÿä¼šè‡ªåŠ¨ç®¡ç†å‘é‡ç´¢å¼•ï¼š

1. **é¦–æ¬¡è¿è¡Œ**ï¼šæ„å»ºç´¢å¼•å¹¶ä¿å­˜åˆ° `cache/vector_index.pkl`
2. **åç»­è¿è¡Œ**ï¼šç›´æ¥åŠ è½½å·²æœ‰ç´¢å¼•ï¼ŒèŠ‚çœæ—¶é—´
3. **æ›´æ–°ç´¢å¼•**ï¼šåˆ é™¤ç¼“å­˜æ–‡ä»¶é‡æ–°æ„å»º

```bash
# æ¸…ç†ç¼“å­˜ï¼ˆéœ€è¦é‡å»ºç´¢å¼•æ—¶ï¼‰
rm -rf cache/vector_index.pkl cache/table_embeddings.pkl
```

## æ‰¹é‡LLMä¼˜åŒ–

ç³»ç»Ÿè‡ªåŠ¨æ‰¹é‡å¤„ç†LLMè¯·æ±‚ï¼š
- æ‰¹é‡å¤§å°ï¼š10ä¸ªæŸ¥è¯¢
- é‡è¯•ç­–ç•¥ï¼šæœ€å¤š5æ¬¡ï¼Œå»¶è¿Ÿ2ç§’
- APIé™æµï¼šè‡ªåŠ¨å¤„ç†503é”™è¯¯

## æœŸæœ›æ€§èƒ½æŒ‡æ ‡

| é…ç½® | Precision | Recall | F1 Score | Hit@1 | æ—¶é—´/æŸ¥è¯¢ |
|------|-----------|--------|----------|-------|-----------|
| L1_only | 0.2-0.3 | 0.4-0.5 | 0.3-0.4 | 0.1-0.2 | <1ç§’ |
| L1+L2 | 0.4-0.5 | 0.7-0.8 | 0.5-0.6 | 0.3-0.4 | 2-3ç§’ |
| L1+L2+L3 | 0.6-0.7 | 0.8-0.9 | 0.7-0.8 | 0.5-0.6 | 3-5ç§’ |

## å¸¸è§é—®é¢˜

### APIè¿‡è½½ï¼ˆ503é”™è¯¯ï¼‰
```bash
# å¢åŠ å»¶è¿Ÿå’Œé‡è¯•
export LLM_RETRY_DELAY=5
export LLM_MAX_RETRIES=10
```

### å†…å­˜ä¸è¶³
```bash
# ä½¿ç”¨æ›´å°‘çš„æŸ¥è¯¢
python run_experiments.py ablation --max-queries 10
```

### æ¸…ç†é¡¹ç›®
```bash
# åˆ é™¤æ‰€æœ‰ç¼“å­˜å’Œä¸´æ—¶æ–‡ä»¶
rm -rf cache/* experiment_results/* __pycache__/
```

## å®éªŒç»“æœ

ç»“æœè‡ªåŠ¨ä¿å­˜åˆ° `experiment_results/ablation/` ç›®å½•ï¼š
- æ–‡ä»¶åæ ¼å¼ï¼š`optimized_ablation_YYYYMMDD_HHMMSS.json`
- åŒ…å«è¯¦ç»†æŒ‡æ ‡å’Œè¿è¡Œæ—¶é—´

## å¼€å‘è¯´æ˜

### ç³»ç»Ÿæ¶æ„
```
ç»Ÿä¸€å…¥å£ (run_experiments.py)
    â”œâ”€â”€ æ¶ˆèå®éªŒ (run_optimized_ablation.py)
    â”‚   â”œâ”€â”€ æ‰¹é‡LLMå¤„ç†å™¨
    â”‚   â”œâ”€â”€ æŒä¹…åŒ–å‘é‡ç´¢å¼•
    â”‚   â””â”€â”€ å•ä¾‹Workflow
    â””â”€â”€ å®Œæ•´å®éªŒ (run_langgraph_system.py)
        â””â”€â”€ å¤šæ™ºèƒ½ä½“ç³»ç»Ÿ
```

### å…³é”®ä¼˜åŒ–
1. **åˆå§‹åŒ–ä¸€æ¬¡**ï¼šWorkflowå’Œç´¢å¼•åªåˆå§‹åŒ–ä¸€æ¬¡
2. **æ‰¹é‡å¤„ç†**ï¼šLLMè¯·æ±‚æ‰¹é‡å‘é€
3. **ç¼“å­˜å¤ç”¨**ï¼šå‘é‡å’ŒåµŒå…¥ç¼“å­˜æŒä¹…åŒ–
4. **å†…å­˜å®‰å…¨**ï¼šç¦ç”¨å¹¶è¡Œå¤„ç†é¿å…æ®µé”™è¯¯

---

**æ³¨æ„**ï¼šç¡®ä¿ `.env` æ–‡ä»¶åŒ…å«æœ‰æ•ˆçš„APIå¯†é’¥ï¼ˆGEMINI_API_KEYï¼‰